#!/usr/bin/env python3

##
# @file smtp.py
# @ingroup afw_bindings_python
# @brief This file contains the Python bindings for the smtp category.
#

# Generated by afwdev generate afw_curl

import requests
import json

def smtp_send(session, url, mail_from, mail_recipients, payload, options=None):
    """
    

    Sends an eMail using SMTP protocol with cURL.

    Args:
        url (str): SMTP Server Url.

        mail_from (str): From Address.

        mail_recipients (list): To Addresses.

        payload (str): Email Payload, or body of the message.

        options (dict): CURL Options

    Returns:
        object:
    """

    request = session.Request()

    action = {
        "function": "smtp_send",
        "url": url,
        "mail_from": mail_from,
        "mail_recipients": mail_recipients,
        "payload": payload
    }

    if options != None:
        action['options'] = options

    request.add_action(action)

    response = request.perform()
    if response.get('status') == 'error':
        raise Exception(response.get('error'))

    return response['actions'][0]['result']

